package za.co.wethinkcode.robotworlds.DataBase;

import net.lemnik.eodsql.BaseQuery;
import net.lemnik.eodsql.Select;
import net.lemnik.eodsql.Update;

import java.util.List;

public interface RobotWorldsDAI extends BaseQuery {

    /**
     * Creates a Database table for robot worlds with its related columns in order
     **/

    @Update("CREATE TABLE IF NOT EXISTS World(WorldName text, Obstacles text, Pits text, Mines text, WorldSize text)")
    void createWorldTable();

    @Update("INSERT INTO World(WorldName, Obstacles, Pits, Mines, WorldSize) VALUES (?{1.worldName}," +
            "?{1.obstacles},?{1.pits},?{1.mines},?{1.worldSize})")
    void saveWorld(WorldDataObject worldDO);

    @Update("DELETE FROM World WHERE WorldName = ?{1}")
    void deleteWorld(String worldName);

    /**
     * Updates the world when there is a duplicate world name
     **/
    @Update("UPDATE World SET Obstacles = ?{1.obstacles}, Pits = ?{1.pits}, Mines = ?{1.mines}, " +
            "WorldSize = ?{1.worldSize} WHERE WorldName = ?{2} ")
    void updateWorld(WorldDataObject worldDO, String name);

    @Select("SELECT * FROM World WHERE WorldName = ?{1}")
    WorldDataObject  restoreWorld(String worldName);

    @Select("SELECT * FROM World")
    List<WorldDataObject> getAllWorldData();

    @Select("SELECT count(*) FROM World WHERE WorldName = ?{1}")
    int checkIfNameExists(String worldName);

    @Select("SELECT count(*) FROM World")
    int getTableSize();

}
